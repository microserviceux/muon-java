plugins {
  id "com.jfrog.bintray" version "1.0"
}
apply plugin: 'groovy'
apply plugin: 'maven'
apply plugin: 'maven-publish'


sourceCompatibility = 1.6
group = theGroup
version = theVersion

ext {
    reactorVersion = '2.0.0.M1'
}


repositories {
  jcenter()
  maven { url 'http://repo.spring.io/libs-milestone' }
}

dependencies {

    compile "org.projectreactor:reactor-core:$reactorVersion"


    //amqp transport
    compile "com.rabbitmq:amqp-client:3.3.2"
    compile 'com.google.code.gson:gson:2.3.1'

    //http transport
    compile 'org.eclipse.jetty:jetty-server:8.1.16.v20140903'
    compile 'org.eclipse.jetty:jetty-client:8.1.16.v20140903'
    compile 'com.google.guava:guava:18.0'

    //lets stream
    compile 'org.reactivestreams:reactive-streams:1.0.0.RC1'

    compile('org.codehaus.groovy:groovy-all:2.3.6')
    testCompile "org.spockframework:spock-core:0.7-groovy-2.0"
}
task wrapper(type: Wrapper) {
    gradleVersion = '2.2'
}
//
//artifacts {
//  archives sourcesJar, javadocJar
//}
configurations {
  published
}

ext.publish = true

bintray {
  user = binUserName
  key = binPassword

  dryRun = false //Whether to run this as dry-run, without deploying
  publish = true //If version should be auto published after an upload

  configurations = ['published', 'archives']
//  publications = ['mavenJava']

  pkg {
    userOrg = 'muoncore'
    repo = 'muon-java'
    name = 'muon-core'
    desc = 'Core Muon Java'
    websiteUrl = 'https://muoncore.io'
    issueTrackerUrl = 'https://github.com/simplicityitself/muon-core-java/issues'
    vcsUrl = 'https://github.com/simplicityitself/muon-core-java.git'
    licenses = ['Apache-2.0']
    labels = ['muon', 'microservices']
    publicDownloadNumbers = true
    attributes= ['a': ['ay1', 'ay2'], 'b': ['bee'], c: 'cee'] //Optional package-level attributes
    //Optional version descriptor
    version {
      name = project.version
      //attributes = ['gradle-plugin': 'com.use.less:com.use.less.gradle:gradle-useless-plugin'] //Optional version-level attributes
//      gpg {
//        sign = true //Determines whether to GPG sign the files. The default is false
//        passphrase = 'passphrase' //Optional. The passphrase for GPG signing'
//      }
      mavenCentralSync {
        sync = false //Optional (true by default). Determines whether to sync the version to Maven Central.
        user = 'userToken' //OSS user token
        password = 'paasword' //OSS user password
        close = '1' //Optional property. By default the staging repository is closed and artifacts are released to Maven Central. You can optionally turn this behaviour off (by puting 0 as value) and release the version manually.
      }
    }
  }
}
